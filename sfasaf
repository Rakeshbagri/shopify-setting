<!-- /templates/product.liquid -->
{%- assign first_3d_model = product.media | where: "media_type", "model" | first -%}

<div class="product-template__container" itemscope itemtype="http://schema.org/Product" id="ProductSection--{{ section.id }}"
     data-section-id="{{ section.id }}"
     data-section-type="product-template"
     data-image-zoom-type="{{ section.settings.enable_image_zoom }}"
     data-enable-history-state="true"
     data-stacked-layout="{% if section.settings.media_layout == "stacked" %}true{% else %}false{% endif %}"
     {% if first_3d_model %}data-has-model="true"{% endif %}>

  <meta itemprop="url" content="{{ shop.url }}{{ product.url }}">
  <meta itemprop="image" content="{{ product.featured_media | img_url: 'grande' }}">

  {% assign current_variant = product.selected_or_first_available_variant %}
  {% assign featured_media = current_variant.featured_media | default: product.featured_media %}

  {% assign stacked = false %}
  {% if section.settings.media_layout == "stacked" %}{% assign stacked = true %}{% endif %}
  {%- assign first_media = true -%}
  <div class="container">
    <div class="row">
      <div class="col-md-6">
        {%- assign featured_media = product.selected_or_first_available_variant.featured_media | default: product.featured_media -%}
        <div class="product_gallery product-{{ product.id }}-gallery {% if product-images == blank %}product_slider{% endif %} {% if settings.product_thumbs == false %}animated fadeInUp{% endif %}">
          <div class="slider slider-for">
            {% for image in product.images %}
            <div>
              <img class="img1" rel="gallery1" src="{{ image | product_img_url: '1024x1024' }}" data-zoom-image="{{ image | product_img_url: '1024x1024' }}" /> 
            </div>
            {%endfor%}
          </div>
          <div class="slider slider-nav">
            {% for image in product.images %}
            <div>
              <img  src="{{ image | product_img_url: '100x1000' }}">
            </div>
            {%endfor%}
          </div>
        </div>
      </div>

      <div class="col-md-6">
        <div class="product-single__meta">
          {% if section.settings.product_vendor_enable %}
          <h2 class="product-single__vendor" itemprop="brand">{{ product.vendor }}</h2>
          {% endif %}

          <h1 class="product-single__title" itemprop="name">{{ product.title }}</h1>

          <div itemprop="offers" itemscope itemtype="http://schema.org/Offer">
            {% comment %}
            Optionally show the 'compare at' or original price of the product.
            {% endcomment %}


          

            <meta itemprop="priceCurrency" content="{{ cart.currency.iso_code }}">
            <link itemprop="availability" href="http://schema.org/{% if product.available %}InStock{% else %}OutOfStock{% endif %}">

            {% capture "form_classes" %}
            product-single__form product-form {% if product.has_only_default_variant %} product-single__form--no-variants{% endif %}
            {%- endcapture %}

            {% capture "form_id" %}AddToCartForm--{{ section.id }}{%- endcapture %}

            {% form 'product', product, data-productid: product.id, class:form_classes, id:form_id, data-product-form: '', data-productid: '{{product.id}}' %}
            {% unless product.has_only_default_variant %}
            {% for option in product.options_with_values %}
            <div class="radio-wrapper js product-form__item">
              <label class="single-option-radio__label"
                     for="ProductSelect-option-{{ forloop.index0 }}">
                {{ option.name | escape }}
              </label>
              {% if section.settings.product_selector == 'radio' %}
              <fieldset class="single-option-radio"
                        id="ProductSelect-option-{{ forloop.index0 }}">
                {% assign option_index = forloop.index %}
                {% for value in option.values %}
                {% assign variant_label_state = true %}
                {% if product.options.size == 1 %}
                {% unless product.variants[forloop.index0].available  %}
                {% assign variant_label_state = false %}
                {% endunless %}
                {% endif %}
                
                <div class="switch_section">
                  <input type="radio"
                         {% if option.selected_value == value %} checked="checked"{% endif %}
                         {% unless variant_label_state %} disabled="disabled"{% endunless %}
                         value="{{ value | escape }}"
                         data-index="option{{ option_index }}"
                         name="option{{ option.position }}"
                         class="single-option-selector__radio{% unless variant_label_state %} disabled{% endunless %}"
                         id="ProductSelect-option-{{ option.name | handleize }}-{{ value | escape }}">
                  <label for="ProductSelect-option-{{ option.name | handleize }}-{{ value | escape }}"{% unless variant_label_state %} class="disabled"{% endunless %}>{{ value | escape }}</label>
                </div>
                {% endfor %}
              </fieldset>
              {% else %}
              <select class="single-option-selector__radio single-option-selector-{{ section.id }} product-form__input" id="SingleOptionSelector-{{ forloop.index0 }}" data-index="option{{ forloop.index }}">
                {% for value in option.values %}
                <option value="{{ value | escape }}"{% if option.selected_value == value %} selected="selected"{% endif %}>{{ value | escape }}</option>
                {% endfor %}
              </select>
              {% endif %}
            </div>
            {% endfor %}
            {% endunless %}

            <select name="id" data-productid="{{ product.id }}" id="ProductSelect--{{ section.id }}" class="product-single__variants no-js">
              {% for variant in product.variants %}
              {% if variant.available %}
              <option {% if variant == product.selected_or_first_available_variant %}
                      selected="selected" {% endif %}
                      data-sku="{{ variant.sku }}"
                      value="{{ variant.id }}">
                {{ variant.title }} - {{ variant.price | money_with_currency }}
              </option>
              {% else %}
              <option disabled="disabled">
                {{ variant.title }} - {{ 'products.product.sold_out' | t }}
              </option>
              {% endif %}
              {% endfor %}
            </select>
            {% if product.available %}{% include 'subscription-product' %}{% endif %}
            {% comment %}
            {% include 'product-price', variant: current_variant %}
            {% endcomment %}
            <div class="product-form__controls-group">
              <div class="qtydiv">
                <div class="qtybox">
                  <span class="btnqty qtyminus icon icon-minus">-</span>
                  <input type="text" id="quantity" name="quantity" value="1" min="1" class="quantity-selector quantity-input" readonly=""><span class="bag_text">bag</span>
                  <span class="btnqty qtyplus icon icon-plus">+</span>
                </div>
              </div>
            </div>
            <div class="product-single__add-to-cart{% if section.settings.add_to_cart_button_size == 'large' %} product-single__add-to-cart--full-width{% endif %}">
              <button type="submit" name="add" id="AddToCart--{{ section.id }}" class="btn btn--add-to-cart{% if section.settings.enable_payment_button and product.selling_plan_groups == empty %} btn--secondary-accent{% endif %}"{% unless current_variant.available %} disabled="disabled"{% endunless %}>
                <span class="btn__text">
                  {% if current_variant.available %}
                  {{ 'products.product.add_to_cart' | t }}
                  {% else %}
                  {{ 'products.product.sold_out' | t }}
                  {% endif %}
                </span>
              </button>

            </div>
            {% endform %}
          </div>
          {% if section.settings.social_sharing_products %}
          {% include 'social-sharing', share_title: product.title, share_permalink: product.url, share_image: product.featured_media %}
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
<div class="product_single_section">
  <div class="container">
    <div class="row">
      <div class="col-lg-12 col-md-12 col-12">
        <div class="product_content_list">
          <ul>
            <li><a href="#product_section">Product</a></li>
            <li><a href="#review_section">Reviews</a></li>
            {%if section.settings.enableingredients%}
            <li><a href="#ingredients_section">Ingredients</a></li>
            {%endif%}
            {%if section.settings.enablenutrition_facts%}
            <li><a href="#nutrition_facts_section">Nutrition</a></li>
            {%endif%}
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div id="product_section">
    <div class="container">
      {{ product.description }}
    </div>
  </div>
  <div id="review_section">
    <div class="container">
      <div class="review_part_section">


        {% assign product = all_products["limitless-mushrooms1"] %} 
        <div class='jdgm-widget jdgm-all-reviews-text1' data-from-snippet='{% if concierge_install != nil %}{{ concierge_install }}{% else %}true{% endif %}' >  

          <h6> {{ shop.metafields.judgeme.all_reviews_rating | round: 1 }}/5 based on {{ shop.metafields.judgeme.all_reviews_count }} reviews. </h6>

          <p> Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et </p>

        </div>  


        <div class="review_part_left">
          <ul>
            {% for block in section.blocks %}
            {% if block.type == 'review-block' %}
            <li>
              {%if block.settings.review_image != blank%}
              <img class="" src="{{block.settings.review_image | img_url: ''}}">
              {%endif%}
            </li>
            {% endif %}
            {%endfor%}
          </ul>
        </div>
        <div class="review_part_right">
{% render 'judgeme_widgets', widget_type: 'judgeme_review_widget', concierge_install: false, product: product %}        </div>
      </div>
    </div>
    {%if section.settings.enableingredients%}
    <div id="ingredients_section">
      <div class="container">
        <div class="row">
          <div class="col-lg-12 col-md-12 col-12 text-center">
            <div class="ingrdients_wrapprer">
              <h3>{{section.settings.intexttitle}}</h3>
              <h2>{{section.settings.intext-1}}</h2>
            </div>
            <div class="ingrdients_list_section">
              <ul class="row">
                {% for block in section.blocks %}
                {% if block.type == 'ingredients-block' %}
                <li class="col-sm-2">
                  {%if block.settings.image != blank%}
                  <img class="" src="{{block.settings.image | img_url: ''}}">
                  {%endif%}
                  {%if block.settings.btn_text1 != blank%}
                  <h4>{{block.settings.btn_text1}}</h4>
                  {%endif%}
                </li>
                {% endif %}
                {%endfor%}
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    {%endif%}
    {%if section.settings.enablenutrition_facts%}
    <div id="nutrition_facts_section">
      <div class="container">
        <div class="row">
          <div class="col-lg-12 col-md-12 col-12 text-center">
            <div class="ingrdients_wrapprer">
              <h2>{{section.settings.texttitle}}</h2>
              <ul class="tabs">
                {%if section.settings.text-1 != blank%}
                <li><a class="active btn" href="#tab1">{{section.settings.text-1}}</a></li>
                {%endif%}
                {%if section.settings.text-2 != blank%}
                <li><a class="btn" href="#tab2">{{section.settings.text-2}}</a></li>
                {%endif%}
              </ul>
              <ul class="tabs-content">
                {%if section.settings.text-1 != blank%}
                {%if section.settings.nutrition1 != blank%}
                <li class="active" id="tab1">
                  <img src="{{section.settings.nutrition1 | img_url: ''}}">
                </li>
                {%endif%}
                {%endif%}
                {%if section.settings.text-2 != blank%}
                {%if section.settings.nutrition2 != blank%}
                <li id="tab2">
                  <img src="{{section.settings.nutrition2 | img_url: ''}}">
                </li>
                {%endif%}
                {%endif%}
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    {%endif%}
  </div>
</div>

{% unless product == empty %}
  <script type="application/json" id="ProductJson-{{ section.id }}">
    {{ product | json }}
  </script>
  <script type="application/json" id="ModelJson-{{ section.id }}">
    {{ product.media | where: 'media_type', 'model' | json }}
  </script>
{% endunless %}

<script>
   $(document).ready(function() {
  $('.slider-for').slick({
  slidesToShow: 1,
  slidesToScroll: 1,
  arrows: false,
  fade: true,
  asNavFor: '.slider-nav'
});
$('.slider-nav').slick({
  slidesToShow: 6,
  slidesToScroll: 1,
  asNavFor: '.slider-for',
  dots: false,

  focusOnSelect: true
});
   }); 
  
$( '.product_content_list a' ).on( 'click', function(e){
  var href = $(this).attr( 'href' );
  $( 'html, body' ).animate({
		scrollTop: $( href ).offset().top
  }, '300' );
  e.preventDefault();
});
</script>
<script>
  $(document).ready(function() {
    $('ul.tabs').each(function(){
      var active, content, links = $(this).find('a');
      active = links.first().addClass('active');
      content = $(active.attr('href'));
      links.not(':first').each(function () {
        $($(this).attr('href')).hide();
      });
      $(this).find('a').click(function(e){
        active.removeClass('active');
        content.hide();
        active = $(this);
        content = $($(this).attr('href'));
        active.addClass('active');
        content.show();
        return false;
      });
    });
  });
  
   $('.qtybox .btnqty').on('click', function(){
          var qty = parseInt($(this).parent('.qtybox').find('.quantity-input').val());
          if($(this).hasClass('qtyplus')) {
            qty++;
          }else {
            if(qty > 1) {
              qty--;
            }
          }
          qty = (isNaN(qty))?1:qty;
          $(this).parent('.qtybox').find('.quantity-input').val(qty);
        }); 
</script>
<style>
ul.tabs{
    display:block;
}
ul.tabs li{
    display:block;
}
ul.tabs li a{
    display:block;
}
ul.tabs li a.active{
    position:relative;
}

ul.tabs-content>li{
    display:none;
}
ul.tabs-content>li.active{
    display:block;
}
ul.tabs:before,ul.tabs:after{
    content:'\0020';
    display:block;
    overflow:hidden;
    visibility:hidden;

}
ul.tabs:after{
    clear:both
}
ul.tabs{
    zoom:1
}

  
  .qtydiv label{display: block;margin-bottom: 12px;letter-spacing: 2.8px;color: #747a7b;}
.qtydiv .btnqty{display: inline-block;cursor: pointer;user-select: none;font-size: 25px;padding: 5px;}
.qtydiv .btnqty.qtyminus{margin-right: 8px;}
.qtydiv .btnqty.qtyplus{margin-left: 8px;}
.qtydiv .quantity-input{border: none;border: none;padding: 8px;text-align: center;width: 50px;outline: none;display: inline-block;}
.qtydiv {display: inline-block;padding-right: 15px;padding-top: 10px;}
</style>
